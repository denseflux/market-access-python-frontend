{% extends "reports/barrier_wizard_step.html" %}
{% load report_urls %}

{% block page_title %} Report A Barrier - Wizard Framework - Barrier Name{% endblock %}

{% block fields %}
    <div class="govuk-form-group">
        <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h1 class="govuk-fieldset__heading">
                    About the barrier
                </h1>
            </legend>
            {% comment %} <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                <h1 class="govuk-fieldset__heading">
                    Barrier Name
                </h1>
            </legend>
            <p class="govuk-body">
                Please provide a name for the barrier.
            </p>

            <div class="govuk-form-group {% if form.title.errors %}govuk-form-group--error{% endif %}" id="form-group-{{ form.prefix }}">
                {% if form.title.help_text %}
                    <div class="govuk-hint">
                        {{ form.title.help_text }}
                    </div>
                {% endif %}
                {% if form.title.errors %}
                    <div>
                        <a id="{{ form.title.prefix }}-{{ form.title.name }}_errors"></a>
                        {% for error in form.title.errors %}
                            <span class="govuk-error-message">
                                <span class="govuk-visually-hidden">Error:</span> {{ error }}
                            </span>
                        {% endfor %}
                    </div>
                {% endif %}
                {{ form.title }}
            </div> {% endcomment %}
            <div class="{% form_group_classes form.title.errors %}">
                <label class="govuk-label govuk-label--s" for="{{ form.title.name }}">
                    {{ form.title.label }}
                </label>
                {% form_field_error form "title" %}
                <span id="{{ form.title.name }}_hint" class="govuk-hint">
                    {{ form.title.help_text }}
                </span>
                <input class="govuk-input" id="{{ form.title.name }}"
                       name="{{ form.title.name }}"
                       type="text"
                       value="{{ form.title.value }}"
                       aria-describedby="{{ form.title.name }}_hint">
            </div>

            <div class="govuk-character-count" data-module="character-count" data-maxlength="300">
                <div class="{% form_group_classes form.summary.errors %}">
                    <label class="govuk-label govuk-label--s" for="description">
                        {{ form.summary.label }}
                    </label>
                    {% form_field_error form "summary" %}
                    <span id="description-hint" class="govuk-hint">
                        {{ form.summary.help_text }}
                    </span>
                    <textarea class="govuk-textarea js-character-count" id="description"
                              name="{{ form.summary.name }}"
                              rows="5"
                              aria-describedby="description-hint description-info">{{ form.summary.value }}</textarea>
                </div>
            </div>

            <div id="{{ form.is_summary_sensitive.name }}" class="{% form_group_classes form.is_summary_sensitive.errors %}">

                {% form_field_error form "is_summary_sensitive" %}

                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        {{ form.is_summary_sensitive.label }}
                    </legend>

                    {% include "partials/official_sensitive.html" %}

                    <div class="govuk-radios">

                        {% for value, name in form.fields.is_summary_sensitive.widget.choices %}
                            <div class="govuk-radios__item">
                                <input class="govuk-radios__input" id="{{ form.is_summary_sensitive.name }}-{{ value }}" name="{{ form.is_summary_sensitive.name }}"
                                    type="radio" value="{{ value }}" {% equal_boolean form.is_summary_sensitive.value value %}
                                    >
                                <label class="govuk-label govuk-radios__label" for="{{ form.is_summary_sensitive.name }}-{{ value }}">{{ name }}
                                </label>
                            </div>
                        {% endfor %}
                    </div>
                </fieldset>
            </div>

            <div class="{% form_group_classes form.product.errors %}">
                <label class="govuk-label govuk-label--s" for="{{ form.product.name }}">
                    {{ form.product.label }}
                </label>
                {% form_field_error form "product" %}
                <input class="govuk-input" id="{{ form.product.name }}"
                       name="{{ form.product.name }}"
                       type="text"
                       value="{{ form.product.value }}">
            </div>

            <div class="{% form_group_classes form.source.errors %}">
                <fieldset class="govuk-fieldset">
                    <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                        {{ form.fields.source.label }}
                    </legend>
                    {% form_field_error form "source" %}
                    <div class="govuk-radios barrier-source govuk-radios--conditional" data-module="radios">
                        {% for choice_id, choice_value in form.fields.source.choices %}
                            <div class="govuk-radios__item barrier-source">
                                <input class="govuk-radios__input"
                                        {% if forloop.counter == 1 %}
                                       id="source"
                                        {% else %}
                                       id="source-{{ forloop.counter }}"
                                        {% endif %}
                                       name="source"
                                       type="radio"
                                       value="{{ choice_id }}"
                                        {% if form.source.value == choice_id or form.source.value.code == choice_id %}
                                       checked="checked"
                                        {% endif %}>
                                <label class="govuk-label govuk-radios__label"
                                        {% if forloop.counter == 1 %}
                                       for="source"
                                        {% else %}
                                       for="source-{{ forloop.counter }}"
                                        {% endif %}
                                >
                                    {{ choice_value }}
                                </label>
                            </div>
                            {% if choice_id == form.BS.OTHER %}
                                <div class="govuk-radios__conditional" id="conditional-{{ form.BS.OTHER }}"
                                     aria-hidden="false">
                                    <div class="{% form_group_classes form.other_source.errors %}">
                                        <label class="govuk-label govuk-label--s" for="other_source">
                                            {{ form.fields.other_source.label }}
                                        </label>
                                        {% form_field_error form "other_source" %}
                                        <input class="govuk-input"
                                               id="other_source"
                                               name="other_source"
                                               type="text"
                                               value="{{ form.other_source.value }}">
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </fieldset>
            </div>


        </fieldset>
    </div>
{% endblock %}
